{% extends "layouts.single" %}

{% block title %}Add a student to the course{% endblock %}

{% block content %}
  <header>
    <ol class="breadcrumb">
      <li><a href="{{ route('home') }}">Home</a></li>
      <li><a href="{{ route('admin.courses.index') }}">Courses</a></li>
      <li><a href="{{ route('admin.courses.show', course.id) }}">{{ course.name }}</a></li>
      <li class="active">{{ block('title') }}</li>
    </ol>
    <h1 class="page-header">{{ block('title') }}</h1>
  </header>

  <article>
    {% if errors is not empty %}
      <div class="alert alert-danger">
        <h4>There was a problem submitting the form</h4>

        <p>Because of the following problems:</p>

        <ol>
          {% for error in errors.all %}
            <li>{{ error }}</li>
          {% endfor %}
        </ol>
      </div>
    {% endif %}

    {% autoescape false %}
    {{ form_open({'route': ['admin.courses.students.store', course.id]}) }}
    <div class="row">
      <div class="form-group col-md-7">
        {{ form_label('student', 'Student to add', {'id': 'unit-label', 'class': 'control-label'}) }}
        {{ form_select('student', students, input.old('student'), {'id': 'unit', 'class': 'form-control chosen-select', 'data-placeholder': 'Select a student'}) }}
      </div>
    </div>

    <div class="row">
      <div class="form-group col-md-5">
        {{ form_label('target_grade', 'Target grade', {'id': 'target_grade-label', 'class': 'control-label'}) }}
        {{ form_select('target_grade', possibleGrades, input.old('target_grade'), {'id': 'target_grade', 'class': 'form-control chosen-select', 'data-placeholder': 'Select grade'}) }}

        <div class="help-block">
          If you already know the student's target grade, enter it here.
        </div>
      </div>
    </div>

    <div class="well">
      {{ form_button('Add student to course', {'type': 'submit', 'class': 'btn btn-primary'}) }}
      or <a href="{{ route('admin.courses.show', course.id) }}">cancel</a>
    </div>
    {{ form_close() }}
    {% endautoescape %}
  </article>
{% endblock %}