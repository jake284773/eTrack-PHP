{% extends "layouts.single" %}

{% block title %}Progress tracker{% endblock %}
{% block mainclass %}col-md-12{% endblock %}

{% block content %}
<header>
  <ol class="breadcrumb">
    <li><a href="{{ route('home') }}">Home</a></li>
    <li><a href="{{ route('admin.courses.index') }}">Courses</a></li>
    <li><a href="{{ route('admin.courses.show', course.id) }}">{{ course.name }}</a></li>
    <li class="active">Progress tracker</li>
  </ol>
  {% if session_has('successMessage') %}
    <div class="alert alert-success">
      {{ session_get('successMessage') }}
    </div>
  {% endif %}

  {% if session_has('infoMessage') %}
    <div class="alert alert-info">
      {{ session_get('infoMessage') }}
    </div>
  {% endif %}

  {% if session_has('errorMessage') %}
    <div class="alert alert-danger">
      {{ session_get('errorMessage') }}
    </div>
  {% endif %}

  <h1 class="page-header">
    {{ block('title') }}
  </h1>
</header>

<table class="table table-responsive table-bordered tracker-table">
  <thead>
  <tr>
    <th>Student</th>
    {% for unit in course.units %}
      <th>Unit {{ unit.number }}</th>
    {% endfor %}
  </tr>
  </thead>

  <tbody>
  {% for student in course.students %}
    <tr>
      <td>{{ student.full_name }} ({{ student.id }})</td>
      {% for unit in course.units %}
        {% for grade in unit.studentGrades %}
          {% if grade.student_user_id == student.id %}
              <td class="grade-{{ grade.grade|lower }}">{{ grade.grade }}</td>
          {% endif %}
        {% endfor %}
      {% endfor %}
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
